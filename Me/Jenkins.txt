- Jenkins - It is an automation tool used to build, test, and deploy applications automatically. (Default Port: 8080). (Default Location: /var/lib/Jenkins).
 - Prerequisite: JAVA.
 - Jenkins works using REST APIs to communicate and automate tasks.
 - Build executors are Jenkins workers that execute jobs, one job per executor.
 - Jenkins assigns jobs to any available executor, usually skipping the first one reserved for internal tasks. Jenkins keeps the first executor free and uses it only when all other executors are busy.
 - An Atom feed in Jenkins provides real-time updates about job and build activities.
 - The number of executors depends on how many jobs run in parallel and the serverâ€™s CPU and memory.

- CI (Continuous Integration): Code changes are tested automatically.

- CD (Continuous Delivery/Deployment): Tested code is automatically released.

- User
  |
  v
 GitHub  -->  Jenkins  -->  Artifact Repo / Nexus / JFrog  -->  AWS EC2  -->  Tomcat
              |    |
              |    +--> SonarQube
              |
              +--> Maven

- Explanation:
	- Code goes to GitHub.
	- Jenkins builds and checks it.
	- Built file is stored in Artifactory / Nexus / JFrog.
	- App is deployed to AWS EC2.
	- Tomcat runs the app.

- Maven â†’ Builds the app.
- Jenkins â†’ Automates the whole process.
- SonarQube â†’ Checks code quality.
- Artifact Repo â†’ Stores built files.
- Artifact â†’ Final built file (like .jar or .war).
- EC2 â†’ Cloud server.
- Tomcat â†’ Runs the app. 

- Plugin is a small add-on that adds extra features to a tool. Plugins help Jenkins connect to GitHub, Maven, AWS, SonarQube, etc. Without plugins, Jenkins canâ€™t talk to other tools.

- Jenkins supports Freestyle, Pipeline, and Multibranch jobs to automate different kinds of tasks.
	- Plugin-based Jobs (UI based) â†’ Click and configure.
	 - Freestyle Job â†’ Basic job to run commands.
	 - Folder Job â†’ Organizes jobs neatly.
	 - External Job â†’ Tracks jobs run outside Jenkins.
	
	- Pipeline-based Jobs (Code based) â†’ Write steps as code.
	 - Pipeline Job â†’ Step-by-step automated process.
	 - Multibranch Pipeline â†’ Runs jobs for each Git branch.

- Labels in Jenkins are used to control which node a job runs on.
 - Label â†’ A name or tag (example: linux, dev).
 - Node â†’ A machine connected to Jenkins (server/VM).
 - Job â†’ A task Jenkins runs (build, test, deploy).
 - Run â†’ When the job is actually executed.
- Labels are tags that tell Jenkins which machine should run a job.

- To connect multiple nodes(machines/instances) to Jenkins:
 - Launch another server (EC2 / VM).
 - Install Java on it. (On the main server â†’ Install Jenkins + Java)(On other nodes (instances) â†’ Install only Java)
 - Go to Jenkins â†’ Manage Nodes.
 - Add new node.
	- Remote root directory - /home/ec2-user
 - Connect it (SSH is common).
	- sudo su 
	- ssh-keyscan -H public-ip >>/var/lib/Jenkins/.ssh/known_hosts
	- chown ec2-user:ec2-user known_hosts
	- chmod 777 known_hosts
 - Set labels and executors.

- Jenkins weather icons show job health based on recent build success and failures.
 - â˜€ï¸ Sunny â†’ All recent builds successful.
 - ðŸŒ¤ï¸ Partly Cloudy â†’ Mostly successful, few failures.
 - â˜ï¸ Cloudy â†’ Equal mix of success and failure.
 - ðŸŒ§ï¸ Rainy â†’ Mostly failures.
 - â›ˆï¸ Stormy â†’ Almost all builds failing.

- Role based authorization plugin - to create different users in different roles.

- A Git hook is a script that runs automatically when certain Git actions occur.

- Build triggers decide when a Jenkins job should start. Triggers decide the right time to build, test, or deploy.

- GitHub trigger for Git SCM Polling.
	- Jenkins checks GitHub again and again to see if code changed. If code changed â†’ Jenkins starts the build.
	- GitHub does NOT notify Jenkins.
	- Jenkins keeps asking GitHub: â€œAny change?â€.
	- This is used when webhooks are not allowed.
	- Slower than webhooks.
- How it works:
	- Jenkins waits for a fixed time (example: every 5 minutes).
	- Jenkins checks GitHub for new code.
	- If code changed â†’ build starts.
	- If no change â†’ nothing happens.

- A webhook is a way for one system to instantly notify another system when an event happens. It lets GitHub tell Jenkins immediately when code changes.
 	- Developer pushes code to GitHub.
	- GitHub sends a webhook message.
	- Jenkins receives the message.
	- Jenkins starts the job.
- Only for Development Environment not Production.

- Poll SCM means Jenkins checks the code repository again and again.If code changed â†’ Jenkins starts the build. It is done using the cronjob code.
	- Slower than webhooks.
	- It is used when Jenkins cannot be exposed to the internet.

- Build periodically runs a Jenkins job on a fixed schedule, regardless of code changes.
	- It is used for Backup jobs, Nightly builds, Health checks, Report generation.
	- Poll SCM: Runs only if code changed but Build periodically: Runs always.

- An upstream job triggers one or more downstream jobs, forming a build pipeline in Jenkins.
	- Upstream Job - The first job in the flow. It starts other jobs. Upstream = parent job.
	- Downstream Job - The job that runs after another job. It depends on the upstream job. Downstream = child job.
	- Upstream job runs (example: build) ----> If it succeeds ----> Downstream job runs (example: deploy).

- Masterâ€“Slave Architecture: In Jenkins, the master controls jobs and scheduling, while slaves (agents) execute the actual builds.
	- Jenkins is split into two types of machines. Master (main controller) and Slave (worker machine). â€œSlaveâ€ is also called Agent (new term).
	- Master manages Jenkins UI, decides which job runs where, stores job configs. Brain of Jenkins.
	- Slave actually runs the job, builds, tests, deploys code. Worker that does the work.
	- This architecture is used because it helps run jobs faster (parallel builds), reduce load on Master, use different OS or tools per agent.
- How it works:
	- Developer triggers a job.
	- Master receives the request.
	- Master assigns job to a Slave.
	- Slave runs the job.
	- Result is sent back to Master.

- Log Rotation: It means automatically managing old logs.Old logs are deleted or archived to save space.
	- Jenkins job â†’ Discard Old Builds.
	- Set: Number of builds to keep, Days to keep builds.

- Always have backups of Jenkins servers. (/var/lib/Jenkins).
	- tar -cvf backup.tar Jenkins
	- scp to backup drive.
	- Thin Backup Plugin.

- Jenkins-url/restart, will also help us restart Jenkins.

- To disable the security feature, edit config.xml and make use security as false.(Not Recommended)(Even if forgot password).

- A single box environment is a setup where all components run on one server.
	- All tools are installed on the same machine.
	- It is used for practice, testing and small projects.
	- It is not scalable.
	- If server fails â†’ everything stops.

- A multibox environment is a setup where different components run on separate servers for better scalability and reliability.

- CI/CD Stages:
 - Git clone ----> SonarQube Integration ----> Maven Compilation -----> Nexus Artifactory ----> Post-build actions (Email & Slack Notification) ----> Deploy to Tomcat.
 - Git clone â†’ Get code from repo.
 - SonarQube â†’ Check code quality.
 - Maven â†’ Build the app.
 - Nexus / Artifactory â†’ Store build file.
 - Post-build â†’ Send alerts.
 - Tomcat â†’ Run the app.
- Take code â†’ check â†’ build â†’ store â†’ notify â†’ deploy.

- SonarQube Metrics:
	- Bugs â†’ Mistakes that can break the app.
	- Vulnerabilities â†’ Security risks.
	- Code smells â†’ Bad coding practices.
	- Coverage â†’ How much code is tested.
	- Duplications â†’ Repeated code.
	- Complexity â†’ Hard-to-read logic.
- Sonar Scanner is a tool that sends your code to SonarQube for analysis.
- Prerequisites to install SonarQube on EC2:
	- Java (JDK 17) â†’ SonarQube runs on Java.
	- Enough RAM â†’ Minimum 2 GB, better 4 GB.
	- Linux EC2 instance â†’ Ubuntu / Amazon Linux.
	- Open port 9000 â†’ To access SonarQube in browser.
	- Database (for production) â†’ PostgreSQL recommended.

- Quality Gate in SonarQube is a pass/fail rule for your code.
 - If rules pass â†’ pipeline continues.
 - If rules fail â†’ pipeline stops.

- Quality Profiles in SonarQube are rule sets used to check code.
	- They define what rules SonarQube should follow.
	- Example: naming rules, security rules, best practices.

- Quality Profiles define the rules for analysis, while Quality Gates decide whether the code passes or fails.
	- Profile = rules list.
	- Gate = final decision.

- Types of packages: jar/war/ear: JAR packages Java code, WAR packages web applications, and EAR bundles multiple modules like JARs and WARs for enterprise deployment. 
	- JAR (Java Archive): Contains Java code and libraries. Used for normal Java apps or reusable code.Think: small package.
	- WAR (Web Archive): Used for web applications. Contains HTML, JSP, servlets, configs. Runs on servers like Tomcat. Think: website package.
	- EAR (Enterprise Archive): Big package that can contain multiple JARs + WARs. Used for large enterprise apps. Think: collection of apps.
	- JAR  --> inside WAR.
	- WAR  --> inside EAR.
	- JAR = code, WAR = web app, EAR = full enterprise bundle.

- Maven: Maven is a tool that builds and manages Java projects automatically.
	- Downloads required libraries.
	- Compiles the code.
	- Runs tests.
	- Creates packages like JAR/WAR/EAR.
- After downloading and extracting Maven in /opt, go into bin folder, copy the path as it is the source of the mvn file. Now 'vi .bash_profile' and add MVN_HOME=the copied path under User specific environment. Then add $MVN_HOME in PATH, PATH =$PATH:$HOME/bin:$MVN_HOME. Then restart  the file using 'source ~/.bash_profile.

- Goals are tasks Maven performs during a build.
	- clean â†’ Deletes old build files.
	- compile â†’ Converts code into class files.
	- test â†’ Runs tests.
	- package â†’ Creates JAR/WAR.
	- install â†’ Saves build to local system.
	- deploy â†’ Uploads build to repo (like Nexus).
- Maven Parameters used in Jenkins:
	- -DskipTests â†’ Build without running tests.
	- -X â†’ Show detailed logs (debug).
	- -e â†’ Show error details.
	- -U â†’ Force update dependencies.
	- -P profileName â†’ Run a specific profile.
	- -Dmaven.test.failure.ignore=true â†’ Continue even if tests fail.
- target directory contains maven packages.
- .m2 directory stores all the dependencies inside Maven.
- We can even run manual commands in directories, using mvn. We can do this to run the command on instance and check the errors. If we fix the issue locally it will automatically be fixed on the GUI.

- Nexus is a tool that stores build files like JAR and WAR so teams can reuse them. It saves build artifacts and acts like a storage center for builds.
	- Artifacts are the final build files created after compiling code.( .jar, .war, .zip).
	- Only prerequisite is JAVA.
- Steps to Install:
	- cd /opt
	- wget link
	- extract
	- rename
	- adduser nexus
	- sudo chown -R nexus:nexus /opt/nexus
	- vi /optnexus/bin/nexus.rc and uncomment run_as_user
	- run_as_user="nexus" (file should have only this line).
	- sudo ln -s /opt/nexus/bin/nexus /etx/init.d/nexus  (to add nexus as a service at boot time).
	- ./nexus start, status, restart
	- default username: admin, default password: admin123
	- get nexus details from pom.xml while configuring in Jenkins.

- 'deploy to container' plugin, to deploy package to tomcat.  